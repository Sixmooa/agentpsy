<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡è¯­è¨€éªŒè¯æµ‹è¯•</title>
    <style>
        body { 
            font-family: 'Microsoft YaHei', sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
            background: #f5f7fa; 
        }
        .container { 
            background: white; 
            border-radius: 12px; 
            padding: 30px; 
            margin-bottom: 20px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
        }
        .test-section { 
            margin: 20px 0; 
            padding: 20px; 
            border: 1px solid #e0e0e0; 
            border-radius: 8px; 
        }
        .passed { 
            background: #e8f5e8; 
            border-color: #4caf50; 
            color: #2e7d32; 
        }
        .failed { 
            background: #ffebee; 
            border-color: #f44336; 
            color: #c62828; 
        }
        .language-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .language-switch button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="language-switch">
        <button onclick="toggleLanguage()" id="lang-btn">English</button>
    </div>

    <div class="container">
        <h1>ä¸­æ–‡è¯­è¨€åŠŸèƒ½éªŒè¯æµ‹è¯•</h1>
        <p>æ­¤é¡µé¢ç”¨äºéªŒè¯ä¸­æ–‡åˆ‡æ¢åŠŸèƒ½æ˜¯å¦å®Œå…¨æ­£å¸¸å·¥ä½œ</p>
        
        <div id="test-results"></div>
        
        <div class="container" style="margin-top: 30px;">
            <h3>å®æ—¶æµ‹è¯•åŒºåŸŸ</h3>
            <div id="live-test">
                <p>å½“å‰è¯­è¨€: <span id="current-lang">ä¸­æ–‡</span></p>
                <div id="sample-question"></div>
                <div id="sample-answers"></div>
                <div id="sample-report"></div>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script>
        let currentLang = 'zh';
        
        function log(message, success = true) {
            const resultsDiv = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `test-section ${success ? 'passed' : 'failed'}`;
            div.innerHTML = `
                <strong>${success ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}:</strong> ${message}
                <div style="font-size: 14px; margin-top: 5px; opacity: 0.8;">
                    æ—¶é—´: ${new Date().toLocaleString('zh-CN')}
                </div>
            `;
            resultsDiv.appendChild(div);
        }
        
        function testChineseData() {
            log('å¼€å§‹éªŒè¯ä¸­æ–‡æ•°æ®å®Œæ•´æ€§...');
            
            // æµ‹è¯•1: ä¸­æ–‡é—®é¢˜æ•°æ®
            try {
                if (typeof QUESTIONS_ZH === 'undefined') {
                    log('QUESTIONS_ZH æœªå®šä¹‰', false);
                    return false;
                }
                
                if (QUESTIONS_ZH.length !== 50) {
                    log(`ä¸­æ–‡é—®é¢˜æ•°é‡é”™è¯¯: æœŸæœ›50ä¸ªï¼Œå®é™…${QUESTIONS_ZH.length}ä¸ª`, false);
                    return false;
                }
                
                // æ£€æŸ¥å‰å‡ ä¸ªé—®é¢˜
                const sampleQuestions = QUESTIONS_ZH.slice(0, 3);
                const hasValidChinese = sampleQuestions.every(q => 
                    q.text && q.text.length > 0 && /[\u4e00-\u9fff]/.test(q.text)
                );
                
                if (!hasValidChinese) {
                    log('ä¸­æ–‡é—®é¢˜æ–‡æœ¬ä¸åŒ…å«ä¸­æ–‡å­—ç¬¦', false);
                    return false;
                }
                
                log(`âœ… ä¸­æ–‡é—®é¢˜æ•°æ®éªŒè¯é€šè¿‡ - ${QUESTIONS_ZH.length}ä¸ªé—®é¢˜`);
            } catch (error) {
                log(`ä¸­æ–‡é—®é¢˜æ•°æ®éªŒè¯å¤±è´¥: ${error.message}`, false);
                return false;
            }
            
            // æµ‹è¯•2: ä¸­æ–‡ç­”æ¡ˆé€‰é¡¹
            try {
                if (typeof ANSWER_OPTIONS === 'undefined' || !ANSWER_OPTIONS.zh) {
                    log('ä¸­æ–‡ç­”æ¡ˆé€‰é¡¹æœªå®šä¹‰', false);
                    return false;
                }
                
                const zhOptions = ANSWER_OPTIONS.zh;
                if (zhOptions.length !== 5) {
                    log(`ä¸­æ–‡ç­”æ¡ˆé€‰é¡¹æ•°é‡é”™è¯¯: æœŸæœ›5ä¸ªï¼Œå®é™…${zhOptions.length}ä¸ª`, false);
                    return false;
                }
                
                const hasValidOptions = zhOptions.every(option => 
                    option.text && /[\u4e00-\u9fff]/.test(option.text)
                );
                
                if (!hasValidOptions) {
                    log('ä¸­æ–‡ç­”æ¡ˆé€‰é¡¹ä¸åŒ…å«ä¸­æ–‡å­—ç¬¦', false);
                    return false;
                }
                
                log('âœ… ä¸­æ–‡ç­”æ¡ˆé€‰é¡¹éªŒè¯é€šè¿‡');
            } catch (error) {
                log(`ä¸­æ–‡ç­”æ¡ˆé€‰é¡¹éªŒè¯å¤±è´¥: ${error.message}`, false);
                return false;
            }
            
            // æµ‹è¯•3: ä¸­æ–‡ç•Œé¢æ–‡æœ¬
            try {
                if (typeof TEXTS === 'undefined' || !TEXTS.zh) {
                    log('ä¸­æ–‡ç•Œé¢æ–‡æœ¬æœªå®šä¹‰', false);
                    return false;
                }
                
                const zhTexts = TEXTS.zh;
                const requiredFields = ['title', 'subtitle', 'submitBtn', 'loadingText'];
                
                for (const field of requiredFields) {
                    if (!zhTexts[field] || !/[\u4e00-\u9fff]/.test(zhTexts[field])) {
                        log(`ä¸­æ–‡ç•Œé¢æ–‡æœ¬å­—æ®µ "${field}" ç¼ºå¤±æˆ–ä¸åŒ…å«ä¸­æ–‡`, false);
                        return false;
                    }
                }
                
                log('âœ… ä¸­æ–‡ç•Œé¢æ–‡æœ¬éªŒè¯é€šè¿‡');
            } catch (error) {
                log(`ä¸­æ–‡ç•Œé¢æ–‡æœ¬éªŒè¯å¤±è´¥: ${error.message}`, false);
                return false;
            }
            
            return true;
        }
        
        function updateLiveTest() {
            document.getElementById('current-lang').textContent = currentLang === 'zh' ? 'ä¸­æ–‡' : 'English';
            
            // æ˜¾ç¤ºç¤ºä¾‹é—®é¢˜
            if (typeof QUESTIONS_ZH !== 'undefined' && QUESTIONS_ZH.length > 0) {
                const sampleQuestion = currentLang === 'zh' ? QUESTIONS_ZH[0] : QUESTIONS_EN[0];
                document.getElementById('sample-question').innerHTML = `
                    <h4>ç¤ºä¾‹é—®é¢˜:</h4>
                    <p><strong>${currentLang === 'zh' ? 'é—®é¢˜' : 'Question'} ${sampleQuestion.id}:</strong> ${sampleQuestion.text}</p>
                `;
            }
            
            // æ˜¾ç¤ºç¤ºä¾‹ç­”æ¡ˆ
            if (typeof ANSWER_OPTIONS !== 'undefined') {
                const options = ANSWER_OPTIONS[currentLang];
                document.getElementById('sample-answers').innerHTML = `
                    <h4>ç­”æ¡ˆé€‰é¡¹:</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        ${options.map(option => `
                            <span style="background: #f0f0f0; padding: 8px 12px; border-radius: 4px; font-size: 14px;">
                                ${option.value}: ${option.text}
                            </span>
                        `).join('')}
                    </div>
                `;
            }
            
            // æ˜¾ç¤ºç¤ºä¾‹æŠ¥å‘Šæ–‡æœ¬
            if (typeof TEXTS !== 'undefined' && TEXTS[currentLang]) {
                const texts = TEXTS[currentLang];
                document.getElementById('sample-report').innerHTML = `
                    <h4>ç•Œé¢æ–‡æœ¬ç¤ºä¾‹:</h4>
                    <ul>
                        <li><strong>æ ‡é¢˜:</strong> ${texts.title}</li>
                        <li><strong>å‰¯æ ‡é¢˜:</strong> ${texts.subtitle}</li>
                        <li><strong>æäº¤æŒ‰é’®:</strong> ${texts.submitBtn}</li>
                        <li><strong>åŠ è½½æ–‡æœ¬:</strong> ${texts.loadingText}</li>
                    </ul>
                `;
            }
        }
        
        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            document.getElementById('lang-btn').textContent = currentLang === 'zh' ? 'English' : 'ä¸­æ–‡';
            updateLiveTest();
            
            log(`åˆ‡æ¢åˆ°${currentLang === 'zh' ? 'ä¸­æ–‡' : 'English'}è¯­è¨€`);
        }
        
        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹ä¸­æ–‡è¯­è¨€åŠŸèƒ½éªŒè¯...');
            
            // å»¶è¿Ÿæ‰§è¡Œä»¥ç¡®ä¿æ•°æ®åŠ è½½å®Œæˆ
            setTimeout(() => {
                const success = testChineseData();
                if (success) {
                    log('ğŸ‰ æ‰€æœ‰ä¸­æ–‡æ•°æ®éªŒè¯é€šè¿‡ï¼è¯­è¨€åˆ‡æ¢åŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œã€‚');
                } else {
                    log('âš ï¸ å‘ç°ä¸­æ–‡æ•°æ®é—®é¢˜ï¼Œéœ€è¦ä¿®å¤ã€‚', false);
                }
                
                updateLiveTest();
            }, 500);
        });
    </script>
</body>
</html>